{"remainingRequest":"B:\\JavaScript\\JS框架\\Vue项目开发\\QueryWebsite-1.2\\fore-end\\studentadmin\\node_modules\\babel-loader\\lib\\index.js!B:\\JavaScript\\JS框架\\Vue项目开发\\QueryWebsite-1.2\\fore-end\\studentadmin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!B:\\JavaScript\\JS框架\\Vue项目开发\\QueryWebsite-1.2\\fore-end\\studentadmin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!B:\\JavaScript\\JS框架\\Vue项目开发\\QueryWebsite-1.2\\fore-end\\studentadmin\\src\\views\\ChangePassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"B:\\JavaScript\\JS框架\\Vue项目开发\\QueryWebsite-1.2\\fore-end\\studentadmin\\src\\views\\ChangePassword.vue","mtime":1620901401924},{"path":"B:\\JavaScript\\JS框架\\Vue项目开发\\QueryWebsite-1.2\\fore-end\\studentadmin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"B:\\JavaScript\\JS框架\\Vue项目开发\\QueryWebsite-1.2\\fore-end\\studentadmin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"B:\\JavaScript\\JS框架\\Vue项目开发\\QueryWebsite-1.2\\fore-end\\studentadmin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"B:\\JavaScript\\JS框架\\Vue项目开发\\QueryWebsite-1.2\\fore-end\\studentadmin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQjovSmF2YVNjcmlwdC9KU1x1Njg0Nlx1NjdCNi9WdWVcdTk4NzlcdTc2RUVcdTVGMDBcdTUzRDEvUXVlcnlXZWJzaXRlLTEuMi9mb3JlLWVuZC9zdHVkZW50YWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQjovSmF2YVNjcmlwdC9KU1x1Njg0Nlx1NjdCNi9WdWVcdTk4NzlcdTc2RUVcdTVGMDBcdTUzRDEvUXVlcnlXZWJzaXRlLTEuMi9mb3JlLWVuZC9zdHVkZW50YWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgLy8gICDml6flr4bnoIHpqozor4Hlh73mlbAKICAgIHZhciBjaGVja3Bhc3N3b3JkID0gZnVuY3Rpb24gY2hlY2twYXNzd29yZChydWxlLCB2YWx1ZSwgY2FsbGJhY2spIHsKICAgICAgaWYgKHZhbHVlID09ICIiKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLml6flr4bnoIHkuI3og73kuLrnqbohIikpOwogICAgICB9IGVsc2UgewogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0KICAgIH07IC8vIOaWsOWvhueggemqjOivgeWHveaVsAoKCiAgICB2YXIgY2hlY2tuZXdwYXNzID0gZnVuY3Rpb24gY2hlY2tuZXdwYXNzKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgewogICAgICB2YXIgcmd4ID0gL15bYS16QS1aXVx3ezUsMTd9JC87CgogICAgICBpZiAodmFsdWUgPT0gIiIpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuaWsOWvhueggeS4jeiDveS4uuepuiEiKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKCFyZ3gudGVzdCh2YWx1ZSkpIHsKICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi5a+G56CB6K+35Lul5a2X5q+N5byA5aS077yM6ZW/5bqm5ZyoNn4xOOS5i+mXtO+8jOWPquiDveWMheWQq+Wtl+avjeOAgeaVsOWtl+WSjOS4i+WIkue6vyEiKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9OyAvLyDnoa7orqTlr4bnoIHpqozor4Hlh73mlbAKCgogICAgdmFyIGNoZWNrY29uZmlybXBhc3MgPSBmdW5jdGlvbiBjaGVja2NvbmZpcm1wYXNzKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgewogICAgICBpZiAodmFsdWUgPT09ICIiKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLor7flho3mrKHovpPlhaXmlrDlr4bnoIEhIikpOwogICAgICB9IGVsc2UgaWYgKHZhbHVlICE9PSBfdGhpcy5mb3JtZGF0YS5uZXdwYXNzKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLkuKTmrKHovpPlhaXlr4bnoIHkuI3kuIDoh7QhIikpOwogICAgICB9IGVsc2UgewogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0KICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgZm9ybWRhdGE6IHsKICAgICAgICB1c2VybmFtZTogd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXJuYW1lIiksCiAgICAgICAgcGFzc3dvcmQ6ICIiLAogICAgICAgIG5ld3Bhc3M6ICIiLAogICAgICAgIGNvbmZpcm1wYXNzOiAiIgogICAgICB9LAogICAgICBjaGFucGFzc3J1bGVzZm9ybTogewogICAgICAgIHBhc3N3b3JkOiBbewogICAgICAgICAgdmFsaWRhdG9yOiBjaGVja3Bhc3N3b3JkLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgbmV3cGFzczogW3sKICAgICAgICAgIHZhbGlkYXRvcjogY2hlY2tuZXdwYXNzLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgY29uZmlybXBhc3M6IFt7CiAgICAgICAgICB2YWxpZGF0b3I6IGNoZWNrY29uZmlybXBhc3MsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XQogICAgICB9LAogICAgICB1c2VybmFtZTogd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXJuYW1lIikKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDooajljZXlhoXlrrnph43nva4KICAgIFJlc2V0OiBmdW5jdGlvbiBSZXNldCgpIHsKICAgICAgY29uc29sZS5sb2codGhpcy5mb3JtZGF0YSk7CiAgICAgIHRoaXMuJHJlZnMuY2hhbnBhc3Nmb3JtLnJlc2V0RmllbGRzKCk7CiAgICB9LAogICAgLy/mj5DkuqTkv67mlLnnmoTlr4bnoIEKICAgIGNvbmZpcm1jaGFuZ2VwYXNzOiBmdW5jdGlvbiBjb25maXJtY2hhbmdlcGFzcygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLiRyZWZzLmNoYW5wYXNzZm9ybS52YWxpZGF0ZSggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh2YWxpKSB7CiAgICAgICAgICB2YXIgZGF0YTsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coX3RoaXMyLmZvcm1kYXRhKTsKCiAgICAgICAgICAgICAgICAgIGlmICghdmFsaSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpczIuZm9ybWRhdGEpOwogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoIi91cHBhc3N3b3JkIiwgX29iamVjdFNwcmVhZCh7fSwgX3RoaXMyLmZvcm1kYXRhKSk7CgogICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICBkYXRhID0gX2NvbnRleHQuc2VudC5kYXRhOwogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsKCiAgICAgICAgICAgICAgICAgIGlmIChkYXRhLm1ldGEuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzMi4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5L+u5pS55a+G56CB5oiQ5YqfIgogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBfdGhpczIuJGFsZXJ0KCLkv67mlLnlr4bnoIHmiJDlip/vvIzor7fpgIDlh7rph43mlrDnmbvlhaUiLCAi5o+Q56S6IiwgewogICAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLAogICAgICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiBjYWxsYmFjaygpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLmNsZWFyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKDE1NDU0KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi4kcm91dGVyLnJlcGxhY2UoIi8iKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLpgIDlh7rmiJDlip8iCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEubWV0YS5zdGF0dXMgPT0gMzAwKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5pen5a+G56CB6ZSZ6K+vLOS/ruaUueWvhueggeWksei0pSIKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLm1ldGEuc3RhdHVzID09IDQwNCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzMi4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIuS/ruaUueWvhueggeWksei0pSzmnI3liqHlmajlj5HnlJ/mnKrnn6XplJnor68iCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgICAgfSkpOwoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0oKSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["ChangePassword.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"changepassword\">\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item\r\n        v-if=\"username == 'jiaowuchu'\"\r\n        :to=\"{ path: '/superhome' }\"\r\n        >首页</el-breadcrumb-item\r\n      >\r\n      <el-breadcrumb-item v-else :to=\"{ path: '/home/' + $route.params.role }\"\r\n        >首页</el-breadcrumb-item\r\n      >\r\n      <el-breadcrumb-item>下载成绩文件</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <el-card>\r\n      <div class=\"form-box\">\r\n        <el-form\r\n          label-width=\"90px\"\r\n          label-position=\"right\"\r\n          :model=\"formdata\"\r\n          :rules=\"chanpassrulesform\"\r\n          ref=\"chanpassform\"\r\n        >\r\n          <el-form-item label=\"用户名:\">\r\n            <el-input\r\n              size=\"small\"\r\n              v-model=\"formdata.username\"\r\n              disabled\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"旧密码:\" prop=\"password\">\r\n            <el-input\r\n              type=\"password\"\r\n              size=\"small\"\r\n              v-model=\"formdata.password\"\r\n              show-password\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"新密码:\" prop=\"newpass\">\r\n            <el-input\r\n              type=\"password\"\r\n              size=\"small\"\r\n              v-model=\"formdata.newpass\"\r\n              show-password\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"确认新密码:\" prop=\"confirmpass\">\r\n            <el-input\r\n              type=\"password\"\r\n              size=\"small\"\r\n              v-model=\"formdata.confirmpass\"\r\n              show-password\r\n            ></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n\r\n        <div class=\"footerbuton\">\r\n          <el-button @click=\"confirmchangepass\">确定</el-button>\r\n          <el-button @click=\"Reset\">重置</el-button>\r\n        </div>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    //   旧密码验证函数\r\n    let checkpassword = (rule, value, callback) => {\r\n      if (value == \"\") {\r\n        callback(new Error(\"旧密码不能为空!\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n\r\n    // 新密码验证函数\r\n    let checknewpass = (rule, value, callback) => {\r\n      let rgx = /^[a-zA-Z]\\w{5,17}$/;\r\n      if (value == \"\") {\r\n        callback(new Error(\"新密码不能为空!\"));\r\n      } else {\r\n        if (!rgx.test(value)) {\r\n          callback(\r\n            new Error(\r\n              \"密码请以字母开头，长度在6~18之间，只能包含字母、数字和下划线!\"\r\n            )\r\n          );\r\n        } else {\r\n          callback();\r\n        }\r\n      }\r\n    };\r\n\r\n    // 确认密码验证函数\r\n    let checkconfirmpass = (rule, value, callback) => {\r\n      if (value === \"\") {\r\n        callback(new Error(\"请再次输入新密码!\"));\r\n      } else if (value !== this.formdata.newpass) {\r\n        callback(new Error(\"两次输入密码不一致!\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n\r\n    return {\r\n      formdata: {\r\n        username: window.sessionStorage.getItem(\"username\"),\r\n        password: \"\",\r\n        newpass: \"\",\r\n        confirmpass: \"\",\r\n      },\r\n      chanpassrulesform: {\r\n        password: [{ validator: checkpassword, trigger: \"blur\" }],\r\n        newpass: [{ validator: checknewpass, trigger: \"blur\" }],\r\n        confirmpass: [{ validator: checkconfirmpass, trigger: \"blur\" }],\r\n      },\r\n      username: window.sessionStorage.getItem(\"username\"),\r\n    };\r\n  },\r\n  methods: {\r\n    // 表单内容重置\r\n    Reset() {\r\n      console.log(this.formdata);\r\n      this.$refs.chanpassform.resetFields();\r\n    },\r\n    //提交修改的密码\r\n    confirmchangepass() {\r\n      this.$refs.chanpassform.validate(async (vali) => {\r\n        console.log(this.formdata);\r\n        if (vali) {\r\n          console.log(this.formdata);\r\n          let data = (\r\n            await axios.post(\"/uppassword\", {\r\n              ...this.formdata,\r\n            })\r\n          ).data;\r\n          console.log(data);\r\n          if (data.meta.status == 200) {\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"修改密码成功\",\r\n            });\r\n            this.$alert(\"修改密码成功，请退出重新登入\", \"提示\", {\r\n              confirmButtonText: \"确定\",\r\n              type: \"success\",\r\n              showClose: false,\r\n              callback: () => {\r\n                window.sessionStorage.clear();\r\n                console.log(15454);\r\n                this.$router.replace(\"/\");\r\n                this.$message({\r\n                  type: \"success\",\r\n                  message: \"退出成功\",\r\n                });\r\n              },\r\n            });\r\n          } else if (data.meta.status == 300) {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: \"旧密码错误,修改密码失败\",\r\n            });\r\n          } else if (data.meta.status == 404) {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: \"修改密码失败,服务器发生未知错误\",\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.changepassword {\r\n  width: 100%;\r\n  height: 100%;\r\n  .el-breadcrumb {\r\n    margin-bottom: 5px;\r\n  }\r\n  .el-card__body {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n\r\n  .el-card {\r\n    width: 100%;\r\n    height: 100%;\r\n    .el-card__body {\r\n      position: relative;\r\n      width: 100%;\r\n      height: 100%;\r\n      .form-box {\r\n        position: absolute;\r\n        width: 500px;\r\n        height: 400px;\r\n        background-color: rgba(233, 236, 240);\r\n        left: 50%;\r\n        top: 50%;\r\n        transform: translate(-50%, -50%);\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n        padding: 30px 10px 30px 10px;\r\n        justify-content: space-around;\r\n        border-radius: 10px;\r\n        box-shadow: 0 0 10px rgb(38, 35, 36);\r\n\r\n        .el-form {\r\n          width: 100%;\r\n          .el-form-item__label {\r\n            color: rgb(159, 0, 127);\r\n          }\r\n        }\r\n      }\r\n      .footerbuton {\r\n        width: 100%;\r\n        display: flex;\r\n        justify-content: flex-end;\r\n        button {\r\n          color: rgb(159, 0, 126);\r\n          font-weight: bold;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"],"sourceRoot":"src/views"}]}